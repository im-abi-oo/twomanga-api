name: Go Build and Run

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-and-run:
    runs-on: ubuntu-latest

    steps:
    # مرحله اول: چک کردن مخزن
    - name: Checkout repository
      uses: actions/checkout@v3

    # مرحله دوم: نصب Go (نسخه جدیدتر)
    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: '1.24'  # به‌روزرسانی به نسخه 1.24

    # مرحله سوم: ساخت فایل go.sum و go.mod در صورت نیاز
    - name: Go mod tidy
      run: |
        go mod tidy  # این دستور go.sum و go.mod را ایجاد یا بروز می‌کند

    # مرحله چهارم: اجرای برنامه
    - name: Run app.go
      run: |
        go run app.go  # این دستور برنامه را اجرا می‌کند
